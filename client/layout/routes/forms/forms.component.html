<router-outlet></router-outlet>

<div class="edu-vertical">
  <edu-panel stripe>
    <edu-title class="mt-3">{{structure.title}}</edu-title>
    <div class="mt-3" *ngIf="structure.description && sectionIdx === 0">
      {{structure.description}}
    </div>
    <div class="mat-warn mt-3">* Obligatorio</div>
  </edu-panel>

  <form [formGroup]="form">
    <ng-template ngFor let-section [ngForOf]="structure.sections" let-idx="index">
      <edu-section *ngIf="shouldDisplay(section)" key="{{idx}}">
        <edu-title> {{section.title}} </edu-title>
        <edu-description *ngIf="section.description"> {{section.description}} </edu-description>
        <ng-template #contentTemplate>
          <ng-template ngFor let-question [ngForOf]="section.questions">
            <div *ngIf="shouldDisplay(question)" [ngSwitch]="question.type">
              <edu-question *ngSwitchCase="'numeric'" [title]="question.title" [description]="question.description"
                [required]="question.required" horizontal>
                <mat-form-field class="mat-accent">
                  <input matInput type="number" [formControlName]="question.id"
                    [attr.min]="getNumberData(question)?.min" [attr.max]="getNumberData(question)?.max"
                    [attr.step]="getNumberData(question)?.step"
                    [attr.placeholder]="getNumberData(question)?.placeholder">
                </mat-form-field>
              </edu-question>
              <div *ngSwitchDefault>SIN IMPLEMENTAR</div>
            </div>
          </ng-template>
        </ng-template>
      </edu-section>
    </ng-template>


    <ng-container [ngTemplateOutlet]="sectionTemplate"></ng-container>

    <div class="edu-container flex-row px-0">
      <button mat-raised-button class="mr-3 px-4" *ngIf="hasPrevSection" (click)="prevSection()">
        Anterior
      </button>

      <button mat-raised-button class="px-4" *ngIf="hasNextSection; else sendButton" (click)="nextSection()">
        Siguiente
      </button>

      <ng-template #sendButton>
        <button mat-raised-button color="primary" class="px-4" type="submit">
          Enviar
        </button>
      </ng-template>

    </div>
  </form>

</div>