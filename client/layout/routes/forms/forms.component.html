<router-outlet></router-outlet>
<div class="edu-vertical">
  <edu-panel stripe>
    <edu-title class="mt-3">{{structure.title}}</edu-title>
    <div class="mt-3" *ngIf="structure.description && sectionIdx === 0">
      {{structure.description}}
    </div>
    <div class="mat-warn mt-3">* Obligatorio</div>
  </edu-panel>

  <form [formGroup]="form">
    <edu-section *ngFor="let sStatus of formState | keyvalue; let idx = index" key="{{idx}}">
      <ng-template [ngIf]="sStatus.value.title">
        <edu-title> {{sStatus.value.title}} </edu-title>
        <edu-description *ngIf="sStatus.value.description"> {{sStatus.value.description}} </edu-description>
      </ng-template>
      <ng-template #contentTemplate>
        <edu-question-panel *ngFor="let sQuestion of sStatus.value.questions | keyvalue" [question]="sQuestion.value">
          <edu-question-wrapper *ngIf="sQuestion.value.isSimple; else mQuestionFields" [question]="sQuestion.value">
          </edu-question-wrapper>

          <ng-template #mQuestionFields>
            <edu-question-wrapper *ngFor="let sField of sQuestion.value.fields | keyvalue" [question]="sField.value">
            </edu-question-wrapper>
          </ng-template>
        </edu-question-panel>
      </ng-template>
    </edu-section>


    <ng-container [ngTemplateOutlet]="sectionTemplate"></ng-container>

    <div class="edu-container flex-row px-0">
      <button mat-raised-button class="mr-3 px-4" *ngIf="hasPrevSection" (click)="prevSection()">
        Anterior
      </button>

      <button mat-raised-button class="px-4" *ngIf="hasNextSection; else sendButton" (click)="nextSection()">
        Siguiente
      </button>

      <ng-template #sendButton>
        <button mat-raised-button color="primary" class="px-4" type="submit">
          Enviar
        </button>
      </ng-template>

    </div>
  </form>

</div>